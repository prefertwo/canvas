<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>线型</title>
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div class="wrap">
        <div class="intro">
            <pre>
                可以通过一系列属性设置线的样式；
                    lineWidth = value       ----> 宽度
                    lineCap = type          ----> 线末端样式 (butt, round, square) 默认为 butt
                    lineJoin = type         ----> 连接处样式 (round, bevel, miter) 默认为 miter
                    miterLimit = value      ----> 限制当两条线相交时交接处最大长度

                    getLineDash()           ----> 返回一个包含当前虚线样式，长度为非负偶数的数组。
                    setLineDash()           ----> 设置当前虚线样式
                    lineDashOffset = value  ----> 设置虚线样式起始偏移量


            </pre>
            
        </div>
        <canvas id="canvas" class="canvas-box" width="200" height="200"></canvas>
        <canvas id="canvasB" class="canvas-box" width="160"></canvas>
        <canvas id="canvasC" class="canvas-box" width="200"></canvas>
        <canvas id="canvasD" class="canvas-box" width="200"></canvas>
        <canvas id="canvasE" class="canvas-box" width="200"></canvas>
        <canvas id="canvasF" class="canvas-box" width="200"></canvas>

    </div>
</body>

<script>
    let canvas = document.getElementById('canvas');
    let canvasB = document.getElementById('canvasB');
    let canvasC = document.getElementById('canvasC');
    let canvasD = document.getElementById('canvasD');
    let canvasE = document.getElementById('canvasE');
    let canvasF = document.getElementById('canvasF');

    if(canvas.getContext) {
        // 
        let ctx = canvas.getContext('2d');
        // 精准的 1 px
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(5.5, 10);
        ctx.lineTo(5.5, 190);
        ctx.strokeStyle = '#f00';
        ctx.stroke();

        for(let i=0;i<12;i++) {
            ctx.lineWidth = 1 + i;
            if(i%3 == 0) {
                ctx.lineCap = 'butt';
            } else if(i%3 == 1) {
                ctx.lineCap = 'round';
            } else {
                ctx.lineCap = 'square';
            }
            ctx.beginPath();
            ctx.moveTo(10 + i*15, 10);
            ctx.lineTo(10 + i*15, 190);
            ctx.strokeStyle = '#F00';
            ctx.stroke();
        }

        // 画布 B
        let ctxB = canvasB.getContext('2d');
        let lineJoin = ['round', 'bevel', 'miter'];
        for(let i=0;i<lineJoin.length;i++) {
            ctxB.lineWidth = 14 + i;
            ctxB.lineJoin = lineJoin[i];
            // ctxB.miterLimit = 1000;
            ctxB.beginPath();
            ctxB.moveTo(10, 10+40*i);
            ctxB.lineTo(45, 40+40*i);
            ctxB.lineTo(80, 10+40*i);
            ctxB.lineTo(115, 40+40*i);
            ctxB.lineTo(145, 10+40*i);
            ctxB.strokeStyle = '#345';
            ctxB.stroke();
        }

        // 画布 C
        let ctxC = canvasC.getContext('2d');

        ctxC.lineWidth = 20;
        ctxC.miterLimit = 200; // 不管用 ？？？
        ctxC.moveTo(20,50);
        ctxC.lineTo(40, 100);
        ctxC.lineTo(60, 50);
        ctxC.lineTo(80, 100);
        ctxC.stroke();

        // 画布 D
        let ctxD = canvasD.getContext('2d');
        let offset = 0;

        function draw() {
            ctxD.clearRect(0, 0, canvasD.width, canvasD.height);
            ctxD.setLineDash([4,2]);
            ctxD.lineDashOffset = -offset; // 正负决定方向
            ctxD.strokeRect(10, 10, 100, 100);
        }

        function march() {
            offset++;
            if(offset > 16) {
                offset = 0;
            }
            draw();
            setTimeout(march, 50);
        }

        march();

        function nixiang() {
            console.log( 'ctxd==', ctxD);
            ctxD.strokeStyle = '#F00';
            // ctxD.lineWidth = 4;
            // ctxD.lineDashOffset =  -(ctxD.lineDashOffset)
        }
        nixiang();

        








        
        
    } else {
        alert('not support canvas API')
    }
</script>

</html>